# XOpts


<!--
DO NOT EDIT THIS FILE
It has been generated from a template by Extractly (https://github.com/RobertDober/extractly.git)
and any changes you make in this file will most likely be lost
-->


[![Build Status](https://travis-ci.org/RobertDober/xopts.svg?branch=master)](https://travis-ci.org/RobertDober/xopts)
[![Coverage Status](https://coveralls.io/repos/github/RobertDober/xopts/badge.svg?branch=master)](https://coveralls.io/github/RobertDober/xopts?branch=master)
[![Hex.pm](https://img.shields.io/hexpm/v/xopts.svg)](https://hex.pm/packages/xopts)
[![Hex.pm](https://img.shields.io/hexpm/dw/xopts.svg)](https://hex.pm/packages/xopts)
[![Hex.pm](https://img.shields.io/hexpm/dt/xopts.svg)](https://hex.pm/packages/xopts)


# XOpts a Command Line Argument Parser on Steroids.

## Synopsis

### Basic Usage

Let us dive right into the simplest, possible case:

    iex(1)> XOpts.parse([])
    {:ok, %{switches: %{}, keywords: %{}, positionals: [], errors: []}}

    iex(2)> XOpts.parse(~W[alpha beta gamma])
    {:ok, %{switches: %{}, keywords: %{}, positionals: ~W[alpha beta gamma], errors: []}}

    iex(2)> XOpts.parse(~W[:verbose alpha level: 42 beta gamma])
    {:ok, %{switches: %{verbose: true}, keywords: %{level: "42"}, positionals: ~W[alpha beta gamma], errors: []}}

Posix is widely used and although it is ugly (beauty lies you know in whose eyes), we can accept it by default

    iex(2)> XOpts.parse(~W[--verbose alpha --level 42 beta gamma])
    {:ok, %{switches: %{verbose: true}, keywords: %{level: "42"}, positionals: ~W[alpha beta gamma], errors: []}}

However we do not need to:

    iex(2)> XOpts.parse(~W[--verbose alpha --level 42 beta gamma], posix: false)
    {:ok, %{switches: %{}, keywords: %{}, positionals: ~W[--verbose alpha --level 42 beta gamma], errors: []}}

For fairness we can also dissallow keyword style arguments:

    iex(2)> XOpts.parse(~W[:verbose alpha level: 42 beta gamma], keyword_style: false)
    {:ok, %{switches: %{}, keywords: %{}, positionals: ~W[:verbose alpha level: 42 beta gamma], errors: []}}


Of course, using the `XOpts` Parser without any configuration - meaning the default configuration -
does not give us much value.


### Simle Configuration

As we have seen in the examples configuration can be passed as keyword arguments, however for more
complex configuration that might become tedious and we therefore will pass in a map.

    iex(3)> configuration = %{
    ...(3)>   allowed_keywords = %{
    ...(0)>     count: :int,
    ...(0)>     message: :string }}
    ...(0)> XOpts.parse(~W[hello count: 42]})
    {:ok, %{switches: %{}, keywords: %{count: 42}, positionals: ~W[hello], errors: []}}

Did you notice the type conversion of the `int` parameter?
Of course you did!

Now the user is alerted of misspelled or badly typed arguments:


    iex(3)> configuration = %{
    ...(3)>   allowed_keywords = %{
    ...(0)>     count: :int,
    ...(0)>     message: :string }}
    ...(0)> expected_errors = [
    ...(0)>    cont: {:forbidden, value: 42}
    ...(0)> ]
    ...(0)> XOpts.parse(~W[hello cont: 42]})
    {:error, %{switches: %{}, keywords: %{}, positionals: ~W[hello], errors: expected_errors}}


## Installation

If [available in Hex](https://hex.pm/docs/publish), the package can be installed
by adding `xopts` to your list of dependencies in `mix.exs`:

```elixir
def deps do
  [
    {:xopts, "~> 0.1.0"}
  ]
end
```

Documentation can be generated with [ExDoc](https://github.com/elixir-lang/ex_doc)
and published on [HexDocs](https://hexdocs.pm). Once published, the docs can
be found at [https://hexdocs.pm/xopt](https://hexdocs.pm/xopt).


# LICENSE

